---
import Layout from '../layouts/Layout.astro';
---

<Layout>
	<!-- Navigation -->
	<nav id="navbar" class="sticky top-0 z-50 transition-all duration-300">
		<div class="bg-blue-600 text-white px-4 md:px-6 py-2">
			<div class="container mx-auto flex justify-between items-center">
				<div id="logo-container" class="flex items-center gap-2 md:gap-3">
					<img src="../logo.jpeg" alt="Logo" class="h-14 md:h-16 w-auto transition-all duration-300" id="logo" />
					<h1 class="text-lg md:text-2xl font-bold transition-all duration-300" id="brand">Dr. Lagnir</h1>
				</div>
				<div class="flex gap-3 md:gap-6 text-sm md:text-base">
					<a href="#services" class="hover:text-blue-200 transition">√ûj√≥nustur</a>
					<a href="#booking" class="hover:text-blue-200 transition">Verkbei√∞ni</a>
					<a href="#contact" class="hover:text-blue-200 transition whitespace-nowrap">Samband</a>
				</div>
			</div>
		</div>
	</nav>

	<!-- Hero Section -->
	<section class="relative text-white py-32 md:py-52 pt-24 md:pt-48 overflow-hidden">
		<!-- Background Image - fills entire area -->
		<div class="absolute inset-0 bg-cover bg-center" style="background-image: url('/waterfall.jpg');"></div>

		<!-- Light blue overlay -->
		<div class="absolute inset-0 bg-gradient-to-br from-blue-900/30 to-blue-700/30"></div>

		<!-- Content -->
		<div class="container mx-auto px-4 text-center relative z-10">
			<h2 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-4 leading-tight">
				L√∂ggildur<br class="sm:hidden" /> P√≠pulagningarmeistari
			</h2>
			<p class="text-base sm:text-lg md:text-xl mb-8 px-4">Sn√∂gg, √Årei√∞anleg, og Sanngj√∂rn Alhli√∞alausn</p>
			<a href="#booking" class="bg-white text-blue-600 px-6 md:px-8 py-3 rounded-lg font-semibold hover:bg-blue-50 transition inline-block">
				Senda Verkbei√∞ni!
			</a>
		</div>
	</section>
	<!-- Services Section -->
	<section id="services" class="py-16 bg-gray-50">
		<div class="container mx-auto px-4">
			<h2 class="text-4xl font-bold text-center mb-12 text-gray-800">√ûj√≥nusta okkar</h2>
			<div class="grid md:grid-cols-3 gap-8">
				<!-- Service Card 1 -->
				<div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition">
					<div class="text-4xl mb-4">üö∞</div>
					<h3 class="text-2xl font-bold mb-3 text-gray-800">Br√°√∞avi√∞ger√∞ir</h3>
					<p class="text-gray-600">24/7 br√°√∞avi√∞ger√∞ir √° p√≠pul√∂gnum fyrir leka, sprungnar p√≠pur og br√°√∞am√°l.</p>
				</div>
				
				<!-- Service Card 2 -->
				<div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition">
					<div class="text-4xl mb-4">üîß</div>
					<h3 class="text-2xl font-bold mb-3 text-gray-800">Hitaleysi</h3>
					<p class="text-gray-600">Komum hita √° kofan √≠ hvelli.</p>
				</div>

				<!-- Service Card 3 -->
				<div class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition">
					<div class="text-4xl mb-4">üöø</div>
					<h3 class="text-2xl font-bold mb-3 text-gray-800">Vi√∞hald</h3>
					<p class="text-gray-600">Reglulegt vi√∞hald og sko√∞anir til a√∞ koma √≠ veg fyrir d√Ωrari vandam√°l.</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Pricing Section -->
	<section id="pricing" class="py-16 bg-white">
		<div class="container mx-auto px-4 max-w-4xl">
			<h2 class="text-4xl font-bold text-center mb-4 text-gray-800">Ver√∞skr√°</h2>
			<p class="text-center text-gray-600 mb-12">Gagns√¶ ver√∞lagning fyrir alla √æj√≥nustu</p>

			<div class="bg-gray-50 rounded-2xl shadow-lg overflow-hidden">
				<table class="w-full">
					<thead>
						<tr class="bg-blue-600 text-white">
							<th class="text-left py-4 px-6 font-semibold text-lg">√ûj√≥nustur</th>
							<th class="text-right py-4 px-6 font-semibold text-lg">Ver√∞ (√°n vsk.)</th>
						</tr>
					</thead>
					<tbody class="divide-y divide-gray-200">
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">T√≠magjald dagvinnu</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">12.500 kr.</td>
						</tr>
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">T√≠magjald kv√∂ld-/helgarvinnu</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">22.500 kr.</td>
						</tr>
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">Verkf√¶ragjald</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">6 %</td>
						</tr>
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">Akstur</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">5.000 kr.</td>
						</tr>
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">√ötkall √≠ n√¶turvinnu</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">69.900 kr.</td>
						</tr>
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">Sko√∞unargjald fyrir tilbo√∞sger√∞</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">30.000 kr.</td>
						</tr>
						<tr class="hover:bg-gray-100 transition">
							<td class="py-4 px-6 text-gray-800">L√°gmarksgjald</td>
							<td class="py-4 px-6 text-right font-semibold text-gray-900">2x t√≠mar + akstur</td>
						</tr>
					</tbody>
				</table>
			</div>

			<p class="text-center text-gray-500 text-sm mt-6">
				* Ver√∞ eru √°√¶tlu√∞. Endanlegt ver√∞ getur veri√∞ breytilegt eftir fl√¶kjustigi og efnum sem √æarf.
			</p>
			<p class="text-center text-gray-500 text-sm mt-6">
				** Sko√∞undargjald er endurkr√¶ft ef verki√∞ er sam√æykkt og framkv√¶mt af okkur.
			</p>
		</div>
	</section>

	<!-- Booking Form Section -->
	<section id="booking" class="py-16 bg-white">
		<div class="container mx-auto px-4 max-w-2xl">
			<h2 class="text-4xl font-bold text-center mb-8 text-gray-800">B√≥ka √æj√≥nustu</h2>

			<!-- Form -->
			<form 
				id="booking-form"
				name="plumbing-booking" 
				method="POST" 
				data-netlify="true"
				netlify-honeypot="bot-field"
				class="bg-gray-50 p-8 rounded-lg shadow-md"
			>
				<!-- Hidden fields for Netlify -->
				<input type="hidden" name="form-name" value="plumbing-booking" />

				<!-- Honeypot spam protection -->
				<p class="hidden">
					<label>Don't fill this out: <input name="bot-field" /></label>
				</p>

				<!-- Name -->
				<div class="mb-4">
					<label class="block text-gray-700 font-semibold mb-2" for="name">
						Fult Nafn *
					</label>
					<input 
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" 
						type="text" 
						id="name" 
						name="name" 
						required
					/>
				</div>

				<!-- Email -->
				<div class="mb-4">
					<label class="block text-gray-700 font-semibold mb-2" for="email">
						Email *
					</label>
					<input 
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" 
						type="email" 
						id="email" 
						name="email" 
						required
					/>
				</div>

				<!-- Phone -->
				<div class="mb-4">
					<label class="block text-gray-700 font-semibold mb-2" for="phone">
						S√≠man√∫mer *
					</label>
					<input 
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" 
						type="tel" 
						id="phone" 
						name="phone" 
						required
					/>
				</div>

				<!-- Address -->
				<div class="mb-4">
					<label class="block text-gray-700 font-semibold mb-2" for="address">
						Heimilisfang *
					</label>
					<input 
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" 
						type="text" 
						id="address" 
						name="address" 
						required
					/>
				</div>

				<!-- Service Type -->
				<div class="mb-4">
					<label class="block text-gray-700 font-semibold mb-2" for="service">
						√ûj√≥nusta Valin *
					</label>
					<select 
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" 
						id="service" 
						name="service" 
						required
					>
						<option value="">Veldu √æj√≥nustu...</option>
						<option value="Noheat">Hitaleysi</option>
						<option value="Installation">Uppsetning</option>
						<option value="Maintenance">Vi√∞hald</option>
						<option value="Repiping">Endurl√∂gn</option>
						<option value="Inspection">Sko√∞un</option>
					</select>
				</div>

				<!-- Message -->
				<div class="mb-6">
					<label class="block text-gray-700 font-semibold mb-2" for="message">
						Verkl√Ωsing
					</label>
					<textarea 
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" 
						id="message" 
						name="message" 
						rows="4"
						placeholder="L√Ωstu verkinu sem √æig vantar..."
					></textarea>
				</div>

				<!-- Submit Button -->
				<button 
					class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition" 
					type="submit"
				>
					Senda bei√∞ni!
				</button>
			</form>

			<!-- Thank You Message (hidden by default) -->
			<div id="thank-you-message" class="hidden bg-green-50 p-8 rounded-lg shadow-md border-2 border-green-200 text-center">
				<div class="text-6xl mb-4">‚úì</div>
				<h3 class="text-3xl font-bold text-green-800 mb-3">Takk fyrir!</h3>
				<p class="text-lg text-gray-700 mb-4">Bei√∞ni √æ√≠n hefur veri√∞ m√≥ttekin.</p>
				<p class="text-gray-600">Vi√∞ munum hafa samband vi√∞ √æig flj√≥tlega.</p>
			</div>
		</div>
	</section>

	<!-- Contact/Footer Section -->
	<footer id="contact" class="bg-gray-800 text-white py-12">
		<div class="container mx-auto px-4">
			<div class="grid md:grid-cols-2 gap-8 items-start mb-8">
				<!-- Left side - Name and title -->
				<div class="text-left">
					<h3 class="text-2xl font-bold mb-2">L√∂ggiltur P√≠pulagningarmeistari</h3>
					<p class="text-xl">Daniel Riviere Villamizar</p>
				</div>

				<!-- Right side - Contact info -->
				<div class="text-left md:text-right">
					<h3 class="text-2xl font-bold mb-4">Haf√∞u samband</h3>
					<p class="mb-2">üìû S√≠mi: (+354) 777-6059</p>
					<p class="mb-2">üìß Netfang: Daniel@drlagnir.is</p>
					<p class="mb-4">üìç √ûj√≥nustusv√¶√∞i: St√≥rh√∂fu√∞borgarsv√¶√∞i√∞</p>
					<p class="mb-2">Kennitala: 571125-1450</p>
				</div>
			</div>

			<!-- Copyright centered at bottom -->
			<p class="text-gray-400 text-sm text-center border-t border-gray-700 pt-6">¬© 2026 DrLagnir. All rights reserved.</p>
		</div>
	</footer>

	<script>
		const navbar = document.getElementById('navbar');
		const navInner = navbar?.querySelector('div');
		const logo = document.getElementById('logo');
		const brand = document.getElementById('brand');
		const logoContainer = document.getElementById('logo-container');
		const heroSection = document.querySelector('section');
			
		window.addEventListener('scroll', () => {
			if (window.scrollY > 50) {
				// Scrolled state - pill mode
				navbar?.classList.add('top-4');
				navbar?.classList.remove('top-0');
				navInner?.classList.add('rounded-full', 'shadow-xl', 'max-w-5xl', 'mx-auto', 'py-2');
				navInner?.classList.remove('px-4', 'md:px-6', 'py-2');
				// Remove left padding, keep right padding
				navInner?.classList.add('pl-0', 'pr-8');
				// Make logo circular and exact size to fit pill
				logo?.classList.add('h-11', 'rounded-full');
				logo?.classList.remove('h-14', 'md:h-16');
				logoContainer?.classList.add('-ml-0.5'); // Slight negative margin to sit flush
				brand?.classList.add('text-lg');
				brand?.classList.remove('text-lg', 'md:text-2xl');
				heroSection?.classList.remove('pt-24', 'md:pt-48');
				heroSection?.classList.add('pt-8');
			} else {
				// Top state - full width with square logo
				navbar?.classList.remove('top-4');
				navbar?.classList.add('top-0');
				navInner?.classList.remove('rounded-full', 'shadow-xl', 'max-w-5xl', 'mx-auto', 'pl-0', 'pr-8', 'py-2');
				navInner?.classList.add('px-4', 'md:px-6', 'py-2');
				// Square logo, larger size
				logo?.classList.remove('h-11', 'rounded-full');
				logo?.classList.add('h-14', 'md:h-16');
				logoContainer?.classList.remove('-ml-0.5');
				brand?.classList.remove('text-lg');
				brand?.classList.add('text-lg', 'md:text-2xl');
				heroSection?.classList.remove('pt-8');
				heroSection?.classList.add('pt-24', 'md:pt-48');
			}
		});

		// Form submission handler
		const form = document.getElementById('booking-form');
		const thankYouMessage = document.getElementById('thank-you-message');
		
		form?.addEventListener('submit', async (e) => {
			e.preventDefault();

			const formData = new FormData(form);

			try {
				const response = await fetch('/', {
					method: 'POST',
					headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
					body: new URLSearchParams(formData).toString()
				});

				if (response.ok) {
					// Hide form and show thank you message
					form.classList.add('hidden');
					thankYouMessage?.classList.remove('hidden');

					// Smooth scroll to the message
					thankYouMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
				}
			} catch (error) {
				alert('Villa kom upp. Vinsamlegast reyndu aftur.');
			}
		});
	</script>

</Layout>

<style>
	html {
		scroll-behavior: smooth;
	}
</style>